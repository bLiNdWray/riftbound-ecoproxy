/* === Layout Modes (horizontal) === */
#card-container.layout-horizontal {
  display: grid;
  grid-template-columns: repeat(auto-fill, 63mm);
  grid-auto-rows: 88mm;
  gap: 0;
  padding: 0;
  box-sizing: border-box;
  justify-content: start;
  align-content: start;
}

/* === Base Card Styling === */
#card-container .card {
  width: 63mm;
  height: 88mm;
  margin: 0;
  box-sizing: border-box;
  background: #fff;
  border: 1px solid #000;
  display: flex;
  flex-direction: column;
  position: relative;
}

/* === Alternate Unit & Spell Layout === */
#card-container .card.unit-alt,
#card-container .card.spell-alt {
  /* inherits .card */
}
#card-container .top-bar-alt {
  display: flex; justify-content: space-between; align-items: center;
  padding: 4px 6px; border-bottom: 1px solid #000; height: 12mm; box-sizing: border-box;
}
#card-container .cost-alt { font-size:18px; font-weight:bold; display:flex; align-items:center; gap:4px; }
#card-container .force-icon-alt { width:18px; height:18px; }
#card-container .might-alt { display:flex; align-items:center; gap:4px; }
#card-container .might-icon-alt { width:18px; height:18px; }
#card-container .name-alt { text-align:center; font-size:12px; font-weight:bold; margin:4px 0; }
#card-container .middle-alt {
  position:relative; flex:1; display:flex; justify-content:center; align-items:center;
  padding:6px; text-align:center; font-size:8pt; line-height:1.3;
}
#card-container .color-indicator-alt {
  position:absolute; bottom:4px; right:4px; display:flex; align-items:center; gap:4px;
}
#card-container .color-icon-alt { width:32px; height:32px; }
#card-container .color-text-alt { font-size:8pt; font-weight:bold; text-transform:capitalize; }
#card-container .bottom-bar-alt {
  padding:4px 6px; border-top:1px solid #000; height:10mm; box-sizing:border-box; display:flex; align-items:center;
}
#card-container .type-line-alt { font-size:8pt; font-weight:bold; }

/* === Battlefield === */
#card-container .bf-columns { display:flex; width:100%; height:100%; }
#card-container .bf-col { flex:1; box-sizing:border-box; overflow:hidden; display:flex; justify-content:center; align-items:center; padding:4px; }
#card-container .bf-col.side { width:20%; }
#card-container .bf-col.center { width:60%; flex-direction:column; }
#card-container .bf-type-text { font-size:8pt; font-weight:bold; text-transform:uppercase; margin-bottom:4px; }
#card-container .bf-name { font-size:10pt; font-weight:bold; text-align:center; }
#card-container .bf-col.side.left .bf-text {
  writing-mode:vertical-lr; text-orientation:mixed; text-align:left; font-size:7pt; line-height:1.2;
}
#card-container .bf-col.side.right .bf-text {
  writing-mode:vertical-rl; text-orientation:mixed; transform:rotate(180deg);
  text-align:right; font-size:7pt; line-height:1.2;
}

/* === Legend === */
#card-container .card.legend { /* inherits .card */ }
#card-container .card.legend .top-bar {
  display:flex; justify-content:space-between; align-items:center; padding:4px 6px;
  border-bottom:1px solid #000; height:12mm; box-sizing:border-box; background:none;
}
#card-container .legend-colors { display:flex; gap:2px; }
#card-container .legend-color-icon { width:32px; height:32px; }
#card-container .legend-label { font-size:8pt; font-weight:bold; text-transform:uppercase; }
#card-container .legend-middle {
  flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center;
  padding:4px 6px; box-sizing:border-box;
}
#card-container .legend-tag { font-size:8pt; font-style:italic; margin-bottom:2px; }
#card-container .legend-name { font-size:14pt; font-weight:bold; text-align:center; }
#card-container .legend-bottom {
  padding:6px 8px; border-top:1px solid #000; height:30mm; box-sizing:border-box;
  display:flex; align-items:center; justify-content:center; text-align:center;
}
#card-container .legend-ability { margin:0; font-size:8pt; line-height:1.3; }

/* === Rune === */
#card-container .card.rune { /* inherits .card */ }
#card-container .rune-top { height:18px; display:flex; justify-content:center; align-items:flex-start; padding-top:4px; }
#card-container .rune-name { font-size:12pt; font-weight:bold; text-align:center; }
#card-container .rune-middle { flex:1; display:flex; justify-content:center; align-items:center; }
#card-container .rune-icon { width:180px; height:180px; border:none; }

/* === FAB Ecoâ€“style Modal & Controls === */
/* Add Cards button */
.fab-btn {
  background:#28a745; color:#fff; padding:0.5rem 1rem; border:none; border-radius:4px;
  font-size:1rem; cursor:pointer; margin:1rem;
}
/* Fullscreen modal */
.modal { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6);
  display:flex; justify-content:center; align-items:center; z-index:1000;
}
.modal.hidden { display:none; }
.modal-content {
  background:#fff; width:90vw; max-width:1000px; height:90vh; border-radius:8px;
  overflow:hidden; display:flex; flex-direction:column;
}
.modal-close {
  background:none; border:none; font-size:1.5rem; padding:0.5rem; align-self:flex-end; cursor:pointer;
}
.modal-body { display:flex; flex:1; overflow:hidden; }
/* Search panel */
.search-panel { width:50%; border-right:1px solid #ddd; display:flex; flex-direction:column; }
#card-search-input {
  padding:0.5rem; font-size:1rem; border:none; border-bottom:1px solid #ddd;
}
.results-grid {
  flex:1; overflow:auto;
  display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:0.5rem; padding:0.5rem;
}
.search-card {
  border:1px solid #ccc; padding:0.5rem; display:flex; flex-direction:column; background:#fafafa;
}
.search-card .name { flex:1; font-size:0.9rem; margin-bottom:0.25rem; }
.search-card .count-badge { font-size:0.8rem; color:#555; }
.search-card .btn-add {
  margin-top:0.25rem; padding:0.25rem; font-size:0.85rem; background:#007bff; color:#fff;
  border:none; cursor:pointer; border-radius:3px;
}
/* Preview panel */
.preview-panel { width:50%; display:flex; flex-direction:column; align-items:center; padding:1rem; }
.card-preview { flex:1; width:100%; border:1px solid #ccc; background:#fff; overflow:hidden; }
.btn-add-preview {
  margin-top:1rem; padding:0.5rem 1rem; font-size:1rem; background:#28a745; color:#fff;
  border:none; cursor:pointer; border-radius:4px;
}
.btn-add-preview:disabled { background:#aaa; cursor:not-allowed; }
